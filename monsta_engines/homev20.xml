<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html>
<html b:css='false' b:defaultmessages='false' b:layoutsVersion='3' b:responsive='true' xmlns='http://www.w3.org/1999/xhtml' xmlns:b='http://www.google.com/namespaces/blogger/v1' xmlns:data='http://www.google.com/namespaces/atom/data' xmlns:expr='http://www.google.com/namespaces/expr/v1'>
<head>
    <title>MonstaComics V4.0 - Premium</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'/>
    <link href='https://fonts.googleapis.com/css2?family=Bebas+Neue&amp;family=Inter:wght@400;700&amp;display=swap' rel='stylesheet'/>
    
    <b:skin><![CDATA[
        :root {
            --bg: #0b0b0b;
            --card: #121212;
            --m-green: #00ff88;
            --m-purple: #a349f5;
            --text: #ffffff;
            --text-dim: #999;
        }

        body { background-color: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; margin: 0; padding: 0; overflow-x: hidden; }
        
        /* HEADER & SEARCH */
        header { 
            background: #111; padding: 10px 5%; display: flex; align-items: center; justify-content: space-between;
            border-bottom: 1px solid #222; position: sticky; top: 0; z-index: 1000;
        }
        .logo { font-family: 'Bebas Neue', cursive; letter-spacing: 2px; font-size: 28px; cursor: pointer; color: #fff; }
        .logo span { color: var(--m-purple); }
        
        .search-box { background: #1a1a1a; border: 1px solid #333; padding: 5px 15px; border-radius: 20px; display: flex; align-items: center; width: 30%; }
        .search-box input { background: transparent; border: none; color: #fff; width: 100%; outline: none; font-size: 13px; }

        /* SIDEBAR */
        #sidebar { 
            position: fixed; left: -300px; top: 0; width: 280px; height: 100%; 
            background: #111; z-index: 2000; transition: 0.3s; border-right: 2px solid var(--m-green); padding: 20px;
        }
        #sidebar.active { left: 0; box-shadow: 10px 0 50px rgba(0,0,0,0.9); }
        .overlay { position: fixed; display: none; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1999; }
        .overlay.active { display: block; }

        /* HOME GRID */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .manga-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; }
        
        .manga-card { 
            background: var(--card); border: 1.5px solid var(--m-green); 
            box-shadow: 0 4px 10px rgba(163, 73, 245, 0.2); transition: 0.3s; cursor: pointer;
        }
        .manga-card:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(163, 73, 245, 0.5); }
        .manga-card img { width: 100%; aspect-ratio: 3/4; object-fit: cover; }
        .card-info { padding: 10px; font-size: 12px; }
        .card-title { font-weight: 700; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-bottom: 4px; }
        .card-chap { color: var(--m-purple); font-weight: bold; font-size: 10px; }

        /* DETAIL MODE */
        #detail-view { display: none; padding-top: 20px; }
        .detail-header { display: flex; gap: 30px; margin-bottom: 30px; flex-wrap: wrap; }
        .detail-cover { width: 250px; border: 2px solid var(--m-green); box-shadow: 0 0 20px rgba(163, 73, 245, 0.3); }
        .detail-info { flex: 1; min-width: 300px; }
        .detail-title { font-family: 'Bebas Neue'; font-size: 40px; color: var(--m-green); margin-bottom: 10px; }
        .genre-tag { display: inline-block; padding: 4px 10px; background: #222; border: 1px solid var(--m-purple); font-size: 11px; margin-right: 5px; margin-top: 5px; }
        
        .chapter-list { margin-top: 30px; max-height: 400px; overflow-y: auto; background: #111; border: 1px solid #222; }
        .chap-item { padding: 15px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; cursor: pointer; transition: 0.2s; }
        .chap-item:hover { background: #1a1a1a; color: var(--m-green); }

        /* READER VIEW */
        #reader-view { display: none; background: #000; }
        .reader-nav { position: sticky; top: 0; background: rgba(10,10,10,0.95); padding: 10px; border-bottom: 1px solid var(--m-green); z-index: 1100; display: flex; justify-content: space-between; align-items: center; }
        .reader-imgs img { width: 100%; max-width: 800px; display: block; margin: 0 auto; }
        .nav-controls { display: flex; gap: 10px; }
        select { background: #222; color: #fff; border: 1px solid var(--m-purple); padding: 5px; }

        /* UTILS */
        .skeleton { background: #1a1a1a; height: 250px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }
        .hidden { display: none !important; }
    ]]></b:skin>
</head>
<body>
    <div class='overlay' id='overlay' onclick='toggleSidebar()'></div>
    <div id='sidebar'>
        <h2 style='font-family:Bebas Neue; color:var(--m-green); font-size:30px;'>MONSTA MENU</h2>
        <div style='margin-top:40px;'>
            <div class='chap-item' onclick='location.reload()'>HOME</div>
            <div class='chap-item'>POPULAR</div>
            <div class='chap-item'>BOOKMARK</div>
        </div>
    </div>

    <header>
        <div style='display:flex; align-items:center; gap:20px;'>
            <div onclick='toggleSidebar()' style='cursor:pointer; font-size:24px; color:var(--m-green)'>☰</div>
            <div class='logo' onclick='location.reload()'>MONSTA<span>COMICS</span></div>
        </div>
        <div class='search-box'>
            <input id='searchInput' onkeyup='searchManga()' placeholder='Cari komik monster...' type='text'/>
        </div>
    </header>

    <div class='container'>
        <div id='home-view'>
            <div class='manga-grid' id='main-grid'>
                <div class='skeleton'></div><div class='skeleton'></div><div class='skeleton'></div>
            </div>
        </div>

        <div id='detail-view'>
            <div id='detail-content'></div>
            <div class='chapter-list' id='chapter-list'></div>
        </div>
    </div>

    <div id='reader-view'>
        <div class='reader-nav'>
            <button class='chap-item' onclick='backToDetail()' style='border:none; background:none; color:#fff;'>← BACK</button>
            <div id='reader-meta' style='font-size:12px; font-weight:bold;'></div>
            <div class='nav-controls'>
                <button id='prevBtn' onclick='changeChap(-1)'>PREV</button>
                <select id='chapSelect' onchange='jumpChap(this.value)'></select>
                <button id='nextBtn' onclick='changeChap(1)'>NEXT</button>
            </div>
        </div>
        <div class='reader-imgs' id='reader-imgs'></div>
    </div>

    <div class='hidden'><b:section id='main' showaddelement='yes'/></div>

    <script type='text/javascript'>
    // <![CDATA[
        const INDEX_URL = "https://cdn.discordapp.com/attachments/1468625981584703673/1468929555380043830/monsta_index.json?ex=6985cec1&is=69847d41&hm=dab16bd3285627383c932252854554714c3eeb53acbb89a3ba3a2ab247085464&";
        let allData = [];
        let currentManga = null;
        let currentChapIdx = 0;

        const proxy = (url) => `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`;

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
        }

        async function init() {
            try {
                const res = await fetch(proxy(INDEX_URL));
                allData = await res.json();
                renderHome(allData);
            } catch (e) { console.error("Index failed"); }
        }

        function renderHome(data) {
            const grid = document.getElementById('main-grid');
            grid.innerHTML = data.map(m => `
                <div class="manga-card" onclick="openDetail('${m.cdn}')">
                    <img src="${m.cover}" loading="lazy"/>
                    <div class="card-info">
                        <div class="card-title">${m.title}</div>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <span style="color:var(--m-green)">★ ${m.rating}</span>
                            <span class="card-chap">CH. ${m.last_chapter || '??'}</span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        async function openDetail(cdn) {
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('detail-view').style.display = 'block';
            window.scrollTo(0,0);
            
            try {
                const res = await fetch(proxy(cdn));
                currentManga = await res.json();
                
                document.getElementById('detail-content').innerHTML = `
                    <div class="detail-header">
                        <img class="detail-cover" src="${currentManga.cover}"/>
                        <div class="detail-info">
                            <h1 class="detail-title">${currentManga.title}</h1>
                            <p style="color:var(--text-dim); font-size:14px; line-height:1.6;">${currentManga.metadata.synopsis || 'No description available.'}</p>
                            <div>${currentManga.metadata.genres.map(g => `<span class="genre-tag">${g}</span>`).join('')}</div>
                            <div style="margin-top:20px; color:var(--m-green); font-weight:bold;">Status: ${currentManga.metadata.status}</div>
                        </div>
                    </div>
                `;

                const list = document.getElementById('chapter-list');
                list.innerHTML = currentManga.chapters.map((c, i) => `
                    <div class="chap-item" onclick="openReader(${i})">
                        <span>Chapter ${c.chapter_num}</span>
                        <span style="color:var(--text-dim); font-size:11px;">${c.release_date || ''}</span>
                    </div>
                `).join('');
            } catch (e) { alert("Detail error"); }
        }

        function openReader(idx) {
            currentChapIdx = idx;
            document.getElementById('detail-view').style.display = 'none';
            document.getElementById('reader-view').style.display = 'block';
            window.scrollTo(0,0);
            renderChapter();
        }

        function renderChapter() {
            const chap = currentManga.chapters[currentChapIdx];
            document.getElementById('reader-meta').innerText = `${currentManga.title.toUpperCase()} - CHAPTER ${chap.chapter_num}`;
            
            // Selector
            const select = document.getElementById('chapSelect');
            select.innerHTML = currentManga.chapters.map((c, i) => `
                <option value="${i}" ${i === currentChapIdx ? 'selected' : ''}>Chapter ${c.chapter_num}</option>
            `).join('');

            // Images Sequential Lazy Load
            const imgContainer = document.getElementById('reader-imgs');
            imgContainer.innerHTML = chap.images.map(img => `<img src="${img}" loading="lazy"/>`).join('');
        }

        function changeChap(dir) {
            let newIdx = currentChapIdx + dir;
            if (newIdx >= 0 && newIdx < currentManga.chapters.length) {
                openReader(newIdx);
            }
        }

        function jumpChap(val) { openReader(parseInt(val)); }

        function backToDetail() {
            document.getElementById('reader-view').style.display = 'none';
            document.getElementById('detail-view').style.display = 'block';
        }

        function searchManga() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const filtered = allData.filter(m => m.title.toLowerCase().includes(query));
            renderHome(filtered);
        }

        window.onload = init;
    // ]]>
    </script>
</body>
</html>